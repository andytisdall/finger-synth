(this["webpackJsonpfinger-synth-web"]=this["webpackJsonpfinger-synth-web"]||[]).push([[0],{67:function(e,t,n){},68:function(e,t,n){},78:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var c=n(9),i=n.n(c),a=n(31),s=n.n(a),r=(n(67),n(68),n(5)),o=n(3),l=n.n(o),u=n(4),h=n(6),d=n(25),f=n(13),v=(n(78),n(0)),p=n(1),j=function(){function e(){Object(v.a)(this,e),this.delay=new f.c("4n"),this.vibrato=new f.f,this.filter=new f.d(2e4,"lowpass"),this.distortion=new f.b,this.synth=new f.e,this.chain=[this.distortion],this.connectChain()}return Object(p.a)(e,[{key:"play",value:function(e,t){this.synth.triggerAttack(),this.filter.frequency.value=150*t,this.synth.frequency.value=e}},{key:"changeFreq",value:function(e){this.synth.frequency.value=e}},{key:"changeMod",value:function(e){this.chain.includes(this.filter)&&(this.filter.frequency.value=150*e),this.chain.includes(this.vibrato)&&(this.vibrato.depth.value=e/100),this.chain.includes(this.delay)&&(this.delay.wet.value=e/100)}},{key:"stop",value:function(){this.synth.triggerRelease()}},{key:"connectChain",value:function(){var e;(e=this.synth).chain.apply(e,Object(r.a)(this.chain).concat([f.a]))}},{key:"addEffect",value:function(e){"filter"===e&&(this.chain.length<2?this.chain.push(this.filter):this.chain.splice(1,0,this.filter)),"vibrato"===e&&(this.chain.length<2?this.chain.push(this.vibrato):this.chain.splice(3,0,this.vibrato)),"delay"===e&&(this.chain.length<2?this.chain.push(this.delay):this.chain.splice(4,0,this.delay)),this.connectChain()}},{key:"removeEffect",value:function(e){"filter"===e&&this.chain.pop(1).disconnect(),"vibrato"===e&&(2===this.chain.length?this.chain.pop(1).disconnect():this.chain.pop(2).disconnect()),"delay"===e&&(2===this.chain.length?this.chain.pop(1).disconnect():3===this.chain.length?this.chain.pop(2).disconnect():this.chain.pop(3).disconnect()),this.connectChain()}}]),e}(),b=n(8),y=function(e){var t=Object(c.useState)(!1),n=Object(h.a)(t,2),i=n[0],a=n[1],s=Object(c.useRef)(null);Object(c.useEffect)((function(){document.addEventListener("touchstart",(function(e){s.current.contains(e.target)||a(!1)}))}),[]);var r=e.options.find((function(t){return t.value===e.selectedValue}));return Object(b.jsxs)("div",{className:"selector",ref:s,children:[Object(b.jsx)("div",{className:"selector-name",children:e.name}),Object(b.jsxs)("div",{className:"selector-menu",onClick:function(){return a(!i)},children:[Object(b.jsx)("div",{className:"selector-selected",children:r.display}),Object(b.jsx)("div",{className:"selector-options",children:i&&e.options.filter((function(t){return t.value!==e.selectedValue})).map((function(t){return Object(b.jsx)("div",{className:"option",onClick:function(n){n.stopPropagation(),e.onSelect(t.value),a(!1)},children:t.display},t.value)}))})]})]})},O=function(e){var t=[];Object(r.a)(Array(7)).forEach((function(e,n){t.push({display:n+1,value:n+1})}));var n=[];return Object(r.a)(Array(12)).forEach((function(e,t){n.push({display:t+1,value:t+1})})),Object(b.jsx)("div",{className:"margin-top",children:Object(b.jsxs)("div",{className:"controls",children:[Object(b.jsx)(y,{name:"Key",options:[{display:"C",value:32.7},{display:"C#",value:34.65},{display:"D",value:36.71},{display:"D#",value:38.89},{display:"E",value:41.2},{display:"F",value:43.65},{display:"F#",value:46.25},{display:"G",value:49},{display:"G#",value:51.91},{display:"A",value:55},{display:"A#",value:58.27},{display:"B",value:61.74}],selectedValue:e.selectedKey,onSelect:e.setKey}),Object(b.jsx)(y,{name:"Base Octave",options:t,selectedValue:e.startingOctave,onSelect:e.setStartingOctave}),Object(b.jsx)(y,{name:"Octave Range",options:n,selectedValue:e.octaves,onSelect:e.setOctaves})]})})},g=function(e){var t=e.activeEffects,n=e.addEffect,c=["filter","vibrato","delay"];return Object(b.jsx)("div",{className:"effect-select",children:c.map((function(e){var c=t.includes(e)?"active":"";return Object(b.jsx)("div",{className:"effect ".concat(c),onClick:function(){return n(e)},children:e},e)}))})},m=function(e){var t=Object(c.useState)(new j),n=Object(h.a)(t,2),i=n[0],a=(n[1],Object(c.useState)(32.7)),s=Object(h.a)(a,2),o=s[0],v=s[1],p=Object(c.useState)(3),y=Object(h.a)(p,2),m=y[0],x=y[1],w=Object(c.useState)(3),k=Object(h.a)(w,2),S=k[0],E=k[1],N=Object(c.useState)([]),C=Object(h.a)(N,2),T=C[0],F=C[1],q=Object(d.a)().domain([.75*window.innerHeight,.05*window.innerHeight]).range(function(){var e=o*m;return[e,e*S*2]}()),A=Object(d.a)().domain([1,100]).range([1,window.innerWidth]),K=function(e){return q(parseInt(e))},V=function(e){return A.invert(e)},B=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=V(t.changedTouches[0].clientX),c=K(t.changedTouches[0].clientY),i.play(c,n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){var t=K(e.changedTouches[0].clientY),n=V(e.changedTouches[0].clientX);i.changeMod(n),i.changeFreq(t)},P=function(){i.stop()},D=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.g();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(O,{selectedKey:o,setKey:v,octaves:S,setOctaves:E,startingOctave:m,setStartingOctave:x}),i?Object(b.jsx)("div",{className:"keyboard",onTouchStart:B,onTouchMove:M,onTouchEnd:P,onTouchCancel:P}):Object(b.jsx)("div",{className:"keyboard",onTouchStart:D,children:Object(b.jsx)("div",{className:"start",children:"Press to Start"})}),Object(b.jsx)(g,{addEffect:function(e){T.includes(e)?(i.removeEffect(e),F(T.filter((function(t){return t!==e})))):(i.addEffect(e),F([].concat(Object(r.a)(T),[e])))},activeEffects:T}),Object(b.jsx)("div",{className:"margin-bottom"})]})};var x=function(){return Object(b.jsx)(m,{})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),a(e),s(e)}))};s.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(x,{})}),document.getElementById("root")),w()}},[[80,1,2]]]);
//# sourceMappingURL=main.29a5f094.chunk.js.map