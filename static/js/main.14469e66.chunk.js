(this["webpackJsonpfinger-synth-web"]=this["webpackJsonpfinger-synth-web"]||[]).push([[0],{67:function(e,t,n){},68:function(e,t,n){},78:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var c=n(9),i=n.n(c),a=n(31),s=n.n(a),r=(n(67),n(68),n(6)),o=n(3),h=n.n(o),l=n(4),u=n(5),d=n(25),f=n(13),v=(n(78),n(0)),j=n(1),b=function(){function e(){Object(v.a)(this,e),this.delay=new f.c("4n"),this.vibrato=new f.f,this.filter=new f.d(2e4,"lowpass"),this.distortion=new f.b,this.synth=new f.e,this.chain=[this.distortion],this.connectChain()}return Object(j.a)(e,[{key:"play",value:function(e,t){this.synth.triggerAttack(),this.filter.frequency.value=150*t,this.synth.frequency.value=e}},{key:"changeFreq",value:function(e){this.synth.frequency.value=e}},{key:"changeMod",value:function(e){this.chain.includes(this.filter)&&(this.filter.frequency.value=150*e),this.chain.includes(this.vibrato)&&(this.vibrato.depth.value=e/100),this.chain.includes(this.delay)&&(this.delay.wet.value=e/100)}},{key:"stop",value:function(){this.synth.triggerRelease()}},{key:"connectChain",value:function(){var e;(e=this.synth).chain.apply(e,Object(r.a)(this.chain).concat([f.a]))}},{key:"addEffect",value:function(e){"filter"===e&&(this.chain.length<2?this.chain.push(this.filter):this.chain.splice(1,0,this.filter)),"vibrato"===e&&(1===this.chain.length?this.chain.push(this.vibrato):2===this.chain.length?this.chain[1]===this.filter?this.chain.push(this.vibrato):this.chain.splice(1,0,this.vibrato):3===this.chain.length&&this.chain.splice(2,0,this.vibrato)),"delay"===e&&(this.chain.length<2?this.chain.push(this.delay):this.chain.splice(4,0,this.delay)),this.connectChain(),console.log(this.chain)}},{key:"removeEffect",value:function(e){var t=this;"filter"===e&&(this.chain=this.chain.filter((function(e){return e!==t.filter}))),"vibrato"===e&&(this.chain=this.chain.filter((function(e){return e!==t.vibrato}))),"delay"===e&&(this.chain=this.chain.filter((function(e){return e!==t.delay}))),this.connectChain(),console.log(this.chain)}}]),e}(),p=n(8),y=function(e){var t=Object(c.useState)(!1),n=Object(u.a)(t,2),i=n[0],a=n[1],s=Object(c.useRef)(null);Object(c.useEffect)((function(){document.addEventListener("touchstart",(function(e){s.current.contains(e.target)||a(!1)}))}),[]);var r=e.options.find((function(t){return t.value===e.selectedValue}));return Object(p.jsxs)("div",{className:"selector",ref:s,children:[Object(p.jsxs)("div",{className:"selector-name",children:[e.name,":"]}),Object(p.jsxs)("div",{className:"selector-menu",onClick:function(){return a(!i)},children:[Object(p.jsx)("div",{className:"selector-selected",children:r.display}),Object(p.jsx)("div",{className:"selector-options",children:i&&e.options.filter((function(t){return t.value!==e.selectedValue})).map((function(t){return Object(p.jsx)("div",{className:"option",onClick:function(n){n.stopPropagation(),e.onSelect(t.value),a(!1)},children:t.display},t.value)}))})]})]})},O=function(e){var t=[];Object(r.a)(Array(7)).forEach((function(e,n){t.push({display:n+1,value:n+1})}));var n=[];return Object(r.a)(Array(12)).forEach((function(e,t){n.push({display:t+1,value:t+1})})),Object(p.jsx)("div",{className:"margin-top",children:Object(p.jsxs)("div",{className:"controls",children:[Object(p.jsx)(y,{name:"Key",options:[{display:"C",value:32.7},{display:"C#",value:34.65},{display:"D",value:36.71},{display:"D#",value:38.89},{display:"E",value:41.2},{display:"F",value:43.65},{display:"F#",value:46.25},{display:"G",value:49},{display:"G#",value:51.91},{display:"A",value:55},{display:"A#",value:58.27},{display:"B",value:61.74}],selectedValue:e.selectedKey,onSelect:e.setKey}),Object(p.jsx)(y,{name:"Base Octave",options:t,selectedValue:e.startingOctave,onSelect:e.setStartingOctave}),Object(p.jsx)(y,{name:"Octave Range",options:n,selectedValue:e.octaves,onSelect:e.setOctaves})]})})},g=function(e){var t=e.activeEffects,n=e.addEffect,c=["filter","vibrato","delay"];return Object(p.jsx)("div",{className:"effect-select",children:c.map((function(e){var c=t.includes(e)?"active":"";return Object(p.jsx)("div",{className:"effect ".concat(c),onClick:function(){return n(e)},children:e},e)}))})},m=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],i=t[1];return Object(p.jsx)("div",{className:"help",onClick:function(){return i(!n)},children:n?Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Touch the screen and a sound will be created.  Moving your finger up and down will get a lower or higher note.  You can customize the range of pitches: the key sets the note of the lowest part of the screen.  The base note sets which octave of that lowest note, and the octave range adjusts how many octaves are available.  The more octaves, the larger the range of notes that you can create."}),Object(p.jsx)("p",{children:"If you move your finger from left to right, you will increase the intensity of the effects, which are shown on the bottom of the screen.  Touch an effect's name to apply it to your sound."})]}):"?"})},w=function(e){var t=Object(c.useState)(new b),n=Object(u.a)(t,2),i=n[0],a=(n[1],Object(c.useState)(32.7)),s=Object(u.a)(a,2),o=s[0],v=s[1],j=Object(c.useState)(3),y=Object(u.a)(j,2),w=y[0],x=y[1],k=Object(c.useState)(3),S=Object(u.a)(k,2),T=S[0],E=S[1],N=Object(c.useState)([]),C=Object(u.a)(N,2),F=C[0],q=C[1],A=Object(c.useState)(!1),K=Object(u.a)(A,2),M=K[0],V=K[1],B=Object(d.a)().domain([.85*window.innerHeight,.05*window.innerHeight]).range(function(){var e=o*w;return[e,e*T*2]}()),I=Object(d.a)().domain([1,100]).range([1,window.innerWidth]),P=function(e){return B(parseInt(e))},D=function(e){return I.invert(e)},L=function(){var e=Object(l.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=D(t.changedTouches[0].clientX),c=P(t.changedTouches[0].clientY),i.play(c,n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){var t=P(e.changedTouches[0].clientY),n=D(e.changedTouches[0].clientX);i.changeMod(n),i.changeFreq(t)},Y=function(){i.stop()},G=function(){var e=Object(l.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.g();case 2:V(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(O,{selectedKey:o,setKey:v,octaves:T,setOctaves:E,startingOctave:w,setStartingOctave:x}),M?Object(p.jsx)("div",{className:"keyboard",onTouchStart:L,onTouchMove:R,onTouchEnd:Y,onTouchCancel:Y,children:Object(p.jsx)(m,{})}):Object(p.jsx)("div",{className:"keyboard",onTouchStart:G,children:Object(p.jsxs)("div",{className:"start",children:["Touch to start.",Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),"This web app only works on mobile devices. For iPhone, make sure your ringer is on."]})}),Object(p.jsx)(g,{addEffect:function(e){F.includes(e)?(i.removeEffect(e),q(F.filter((function(t){return t!==e})))):(i.addEffect(e),q([].concat(Object(r.a)(F),[e])))},activeEffects:F})]})};var x=function(){return Object(p.jsx)(w,{})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),a(e),s(e)}))};s.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(x,{})}),document.getElementById("root")),k()}},[[80,1,2]]]);
//# sourceMappingURL=main.14469e66.chunk.js.map